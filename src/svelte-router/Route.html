<div class="route {{active ? 'is-active': ''}}">
  <p>(route: {{path}}, active: {{active}})</p>
  {{#if active}}
    <slot />
  {{/if}}
</div>

<style>
  .route {
    border-left: solid 4px #ccc;
    padding-left: 1em;
  }
  .route.is-active {
    border-color: green;
  }
</style>

<script>
  import Pattern from './pattern';
  import { getRouter } from './methods';

  export default {
    oncreate() {
      const router = getRouter(this);
      if (!router) return;

      router.observe('location', () => {
        const pattern = this.get('pattern');
        const active = router.match(pattern);
        const params = active ? pattern.params(router.url) : null;
        this.set(Object.assign({ active }, params));
      });
    },
    
    data: () => ({ path: '*', exact: false, router: null, active: false }),

    computed: {
      pattern: (path, exact) => new Pattern(path, exact)
    }
  }
</script>
