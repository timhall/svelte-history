<div class="route {{active ? 'is-active': ''}}">
  <p>(route: {{path}}, active: {{active}})</p>
  {{#if active}}
    <slot />
  {{/if}}
</div>

<style>
  .route {
    border-left: solid 4px #ccc;
    padding-left: 1em;
  }
  .route.is-active {
    border-color: green;
  }
</style>

<script>
  import UrlPattern from 'url-pattern';
  import { normalizePattern } from './methods';

  export default {
    oncreate() {
      const router = this.get('router') || this.store && this.store.get('router');
      if (!router) return;

      router.observe('location', (location) => {
        const pattern = this.get('pattern');
        const params = pattern.match(router.url);
        this.set(Object.assign({ active: params !== null }, params));
      });
    },
    
    data: () => ({ path: '*', exact: false, router: null, active: false }),

    computed: {
      pattern: (path, exact) => new UrlPattern(normalizePattern(path, exact))
    }
  }
</script>
