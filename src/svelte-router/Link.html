<a :href :target :class :style :rel on:click="click(event)"><slot /></a>

<script>
  import { getRouter } from './methods';

  export default {
    oncreate() {
      const router = getRouter(this);

      this.observe('to', to => {
        const href = router.toHref(to);
        this.set({ href });
      });
    },

    data: () => ({
      to: '/',
      replace: false,
      href: '/',
      target: '',
      class: '',
      style: '',
      rel: '',
      router: null
    }),

    methods: {
      click(e) {
        this.fire('click', e);

        // Ignore everything except unmodified left-clicks
        // (ignore if from button, has modifier key, or has target)
        if (e.defaultPrevented) return;
        if (e.button !== 0) return;
        if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) return;
        if (this.get('target')) return;

        e.preventDefault();

        const to = this.get('to');
        const router = getRouter(this);

        if (this.get('replace')) router.replace(to);
        else router.push(to);
      }
    }
  }
</script>
