<script>
  import Pattern from 'url-pattern';
  import { getRouter } from './methods';

  export default {
    oncreate() {
      const router = getRouter(this);

      if (!this.get('path')) router.replace(this.get('to'));

      this.observe('pattern', pattern => {
        const active = pattern && router.match(pattern);
        this.set({ active });
      })
      this.observe('active', active => {
        if (active) this.replace(this.get('to'));
      });
    },

    data: () => ({ path: null, to: null, exact: false, active: false, router: null }),
    computed: {
      pattern: (path, exact) => path && new Pattern(path, exact)
    }
  }
</script>
