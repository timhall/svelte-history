<script>
  import Pattern from 'url-pattern';
  import { replace } from './methods';

  export default {
    oncreate() {
      if (!this.get('path')) this.replace(this.get('to'));

      this.observe('active', active => {
        if (active) this.replace(this.get('to'));
      });
    },

    data: () => ({ path: null, to: null, exact: false, router: null }),
    
    computed: {
      pattern: (path, exact) => path && new Pattern(path, exact),
      active: (pattern, router, $router) => {
        if (!pattern) return false;
        if (router) return router.match(pattern);
        if ($router) return $router.match(pattern);
        return false;
      }
    },

    methods: { replace }
  }
</script>
